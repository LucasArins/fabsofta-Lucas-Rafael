<div class="container my-5">
  <div class="row justify-content-center">
    <div class="col-md-8 col-lg-6">
      <div class="card shadow-lg border-0">
        <div class="card-header bg-gradient text-white text-center py-4" style="background: linear-gradient(135deg, #28a745, #20c997);">
          <h3 class="mb-0">
            <i class="bi bi-box"></i>
            {{produto.id ? 'Editar' : 'Cadastrar'}} Produto
          </h3>
        </div>
        
        <div class="card-body p-4">
          <!-- Mensagem de erro -->
          <div class="alert alert-danger alert-dismissible fade show" *ngIf="erroMensagem" role="alert">
            <i class="bi bi-exclamation-triangle me-2"></i>
            {{erroMensagem}}
            <button type="button" class="btn-close" (click)="erroMensagem = ''"></button>
          </div>

          <!-- Mensagem de sucesso -->
          <div class="alert alert-success alert-dismissible fade show" *ngIf="sucessoMensagem" role="alert">
            <i class="bi bi-check-circle me-2"></i>
            {{sucessoMensagem}}
            <button type="button" class="btn-close" (click)="sucessoMensagem = ''"></button>
          </div>

          <form #produtoForm="ngForm" (ngSubmit)="salvar()">
            <!-- Nome do Produto -->
            <div class="mb-3">
              <label for="nome" class="form-label fw-semibold">
                <i class="bi bi-tag me-1"></i>Nome do Produto *
              </label>
              <input 
                type="text"
                [(ngModel)]="produto.nome"
                class="form-control"
                id="nome"
                name="nome"
                placeholder="Digite o nome do produto"
                required
                minlength="2"
                #nomeField="ngModel">
              
              <div class="invalid-feedback" *ngIf="nomeField.invalid && nomeField.touched">
                <div *ngIf="nomeField.errors?.['required']">Nome é obrigatório</div>
                <div *ngIf="nomeField.errors?.['minlength']">Nome deve ter pelo menos 2 caracteres</div>
              </div>
            </div>

            <!-- Preço -->
            <div class="mb-3">
              <label for="preco" class="form-label fw-semibold">
                <i class="bi bi-currency-dollar me-1"></i>Preço (R$) *
              </label>
              <input 
                type="number"
                [(ngModel)]="produto.preco"
                class="form-control"
                id="preco"
                name="preco"
                min="0"
                step="0.01"
                placeholder="0,00"
                required
                #precoField="ngModel">
              
              <div class="invalid-feedback" *ngIf="precoField.invalid && precoField.touched">
                <div *ngIf="precoField.errors?.['required']">Preço é obrigatório</div>
                <div *ngIf="precoField.errors?.['min']">Preço deve ser maior que zero</div>
              </div>
            </div>

            <!-- Descrição -->
            <div class="mb-3">
              <label for="descricao" class="form-label fw-semibold">
                <i class="bi bi-text-paragraph me-1"></i>Descrição
              </label>
              <textarea 
                [(ngModel)]="produto.descricao"
                class="form-control"
                id="descricao"
                name="descricao"
                rows="3"
                placeholder="Descreva o produto (opcional)"></textarea>
            </div>

            <!-- Quantidade em Estoque -->
            <div class="mb-3">
              <label for="quantidadeEstoque" class="form-label fw-semibold">
                <i class="bi bi-boxes me-1"></i>Quantidade em Estoque *
              </label>
              <input 
                type="number"
                [(ngModel)]="produto.quantidadeEstoque"
                class="form-control"
                id="quantidadeEstoque"
                name="quantidadeEstoque"
                min="0"
                placeholder="0"
                required
                #estoqueField="ngModel">
              
              <div class="invalid-feedback" *ngIf="estoqueField.invalid && estoqueField.touched">
                <div *ngIf="estoqueField.errors?.['required']">Quantidade é obrigatória</div>
                <div *ngIf="estoqueField.errors?.['min']">Quantidade não pode ser negativa</div>
              </div>
            </div>

            <!-- URL da Imagem -->
            <div class="mb-4">
              <label for="imagemUrl" class="form-label fw-semibold">
                <i class="bi bi-image me-1"></i>URL da Imagem
              </label>
              <input 
                type="url"
                [(ngModel)]="produto.imagemUrl"
                class="form-control"
                id="imagemUrl"
                name="imagemUrl"
                placeholder="https://exemplo.com/imagem.jpg">
            </div>

            <!-- Botões de Ação -->
            <div class="d-flex justify-content-between">
              <button 
                type="button"
                class="btn btn-outline-secondary px-4"
                [routerLink]="['/produtos']">
                <i class="bi bi-arrow-left me-2"></i>Voltar
              </button>
              
              <button 
                type="submit"
                class="btn btn-success px-4"
                [disabled]="!produtoForm.valid || salvando">
                <i class="bi bi-check-circle me-2" *ngIf="!salvando"></i>
                <span class="spinner-border spinner-border-sm me-2" *ngIf="salvando"></span>
                {{salvando ? 'Salvando...' : 'Salvar Produto'}}
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>

